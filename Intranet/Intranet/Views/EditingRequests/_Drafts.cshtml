@model IEnumerable<Intranet.ViewModels.DraftsViewModel>

@{
    ViewBag.Title = "Manage Drafts";
}

<h2>Drafts</h2>
@if (TempData["Message"] != null)
{
    <div class="alert alert-dismissible alert-success">@TempData["Message"]</div>
}
<br />

@if (Request.Url.Query.Contains("Manage=Yes") == true)
{
    if (Request.Url.PathAndQuery.Contains("ManageRequest") == true)
    {
        <div class="form-group">
            <div class="editor-label"></div>
            <div class="col-md-10">
                <input type="submit" value="Add Draft" name="Buttons" class="btn btn-primary" />
            </div>
        </div>
    }
}
<br />&nbsp;

<table width="100%">
    <tr>
        <td>
            <div id="demo">
                <table id="datatables" class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>@Html.DisplayNameFor(model => model.DraftID)</th>
                            <th>@Html.DisplayNameFor(model => model.DraftName)</th>
                            <th>@Html.DisplayNameFor(model => model.DraftAssignedDate)</th>
                            <th>@Html.DisplayNameFor(model => model.Editor)</th>
                            <th>@Html.DisplayNameFor(model => model.EditorHours)</th>
                            <th>@Html.DisplayNameFor(model => model.DraftCompletedDate)</th>
                            <th>@Html.DisplayNameFor(model => model.Reviewer)</th>
                            <th>@Html.DisplayNameFor(model => model.EditorialHours)</th>
                            <th>@Html.DisplayNameFor(model => model.EditorialReviewCompleted)</th>                           
                                @if (Request.Url.Query.Contains("Manage=Yes") == true)
                                {
                                    <th></th>
                                }
                            
                        </tr>
                    </thead>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.DraftID</td>
                            <td>@item.DraftName</td>
                            <td>@item.DraftAssignedDate.ToShortDateString()</td>
                            <td>@item.Editor</td>
                            <td>@item.EditorHours</td>
                            <td>@if(item.DraftCompletedDate.HasValue)
                                {
                                    @item.DraftCompletedDate.Value.ToShortDateString()
                                }
                            </td>
                            <td>@item.Reviewer</td>          
                            <td>@item.EditorialHours</td>                  
                            <td>
                                @if(item.EditorialReviewCompleted.HasValue)
                                {
                                    if (item.EditorialReviewCompleted.Value.ToShortDateString().ToString() == "1/1/0001")
                                    { }
                                    else
                                    {
                                        @item.EditorialReviewCompleted.Value.ToShortDateString()
                                    }
                                }
                            </td>                           
                                @if (Request.Url.Query.Contains("Manage=Yes") == true)
                                {
                                    <td>
                                        @Html.ActionLink("Edit", "EditDraft", new { id = item.DraftID })
                                        <text>|</text>
                                        @Html.ActionLink("View", "DraftDetails", new { id = item.DraftID })
                                        <text>|</text>
                                        @Html.ActionLink("Delete", "DraftDelete", new { id = item.DraftID })
                                    </td>
                                }

                        </tr>
                    }
                </table>
            </div>
        </td>
    </tr>
</table>

